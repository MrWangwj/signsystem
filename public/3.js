webpackJsonp([3],{161:function(e,t,s){function r(e){s(194)}var o=s(9)(s(196),s(197),r,null,null);e.exports=o.exports},194:function(e,t,s){var r=s(195);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s(17)("25fb2417",r,!0)},195:function(e,t,s){t=e.exports=s(7)(),t.push([e.i,"",""])},196:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{userId:{required:!0},courseInfos:{type:Array,required:!0}},data:function(){return{courses:[],editCourseVisible:!1,editCourse:{id:0,name:"",teacher:"",location:"",week_day:1,start_week:1,status:0,end_week:1,start_section:1,end_section:""},end_weeks:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],end_sections:[2,4,5,7,9,11,12],rules:{name:[{required:!0,message:"请输入课程名称",trigger:"blur"},{max:50,message:"长度在50个字符内",trigger:"blur"}],teacher:[{required:!0,message:"请输入上课教师",trigger:"blur"},{max:15,message:"长度在15个字符内",trigger:"blur"}],location:[{required:!0,message:"请输入上课地点",trigger:"blur"},{max:50,message:"长度在50个字符内",trigger:"blur"}],week_day:[{required:!0,message:"请选择星期"}],start_week:[{required:!0,message:"请选择开始周"}],end_week:[{required:!0,message:"请选择结束周"}],start_section:[{required:!0,message:"请选择开始节数"}],end_section:[{required:!0,message:"请选择结束节数"}],status:[{required:!0,message:"请选择周类型"}]}}},methods:{editCourseFun:function(e,t){this.editCourse=this.courseInfos[e],this.editCourseVisible=!0},deleteCourseFun:function(e,t){var s=this;this.$confirm("此操作将删除当前课程, 是否继续?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){axios.post("/admin/user/course/delete",{"user-id":s.userId,id:s.courses[e].id}).then(function(e){var t=e.data;0===parseInt(t.code)?s.$message.error(t.msg):(s.$message({message:"删除成功",type:"success"}),s.$emit("courseInfo"))})})},startSectionChange:function(e){0===e?this.newCourse.end_section<this.newCourse.start_section&&(this.newCourse.end_section=""):this.editCourse.end_section<this.editCourse.start_section&&(this.editCourse.end_section="")},startWeekChange:function(e){0===e?this.newCourse.end_week<this.newCourse.start_week&&(this.newCourse.end_week=""):this.editCourse.end_week<this.editCourse.start_week&&(this.editCourse.end_week="")},editSubmit:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return!1;axios.post("/admin/user/course/edit",{"user-id":t.userId,id:t.editCourse.id,name:t.editCourse.name,teacher:t.editCourse.teacher,location:t.editCourse.location,week_day:t.editCourse.week_day,start_week:t.editCourse.start_week,end_week:t.editCourse.end_week,status:t.editCourse.status,start_section:t.editCourse.start_section,end_section:t.editCourse.end_section}).then(function(s){var r=s.data;1===parseInt(r.code)?(t.$message({message:"修改成功",type:"success"}),t.$emit("courseInfo"),t.editCourseVisible=!1,t.$refs[e].resetFields()):t.$message.error(r.msg)})})}},watch:{courseInfos:{handler:function(e,t){this.courses=[];var s=["","单","双"],r=["","星期一","星期二","星期三","星期四","星期五","星期六","星期日"];for(var o in this.courseInfos){var a=this.courseInfos[o],i=a.start_week===a.end_week?a.end_week:a.start_week+"-"+a.end_week,l="["+i+s[a.status]+"周]"+r[a.week_day]+"["+a.start_section+"-"+a.end_section+"节]/"+a.location;this.courses.push({id:a.id,name:a.name,teacher:a.teacher,info:l})}},deep:!0}},mounted:function(){}}},197:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.courses,border:""}},[s("el-table-column",{attrs:{prop:"name",label:"课程名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"teacher",label:"教师名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"info",label:"上课时间／地点"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small"},on:{click:function(s){e.editCourseFun(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){e.deleteCourseFun(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("el-dialog",{staticClass:"dialog-width",attrs:{title:"编辑课程",visible:e.editCourseVisible},on:{"update:visible":function(t){e.editCourseVisible=t}}},[s("el-form",{ref:"editCourse",staticStyle:{width:"460px"},attrs:{model:e.editCourse,"label-width":"80px",rules:e.rules}},[s("el-form-item",{attrs:{label:"课程名称",prop:"name"}},[s("el-input",{model:{value:e.editCourse.name,callback:function(t){e.editCourse.name=t},expression:"editCourse.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"教师",prop:"teacher"}},[s("el-input",{model:{value:e.editCourse.teacher,callback:function(t){e.editCourse.teacher=t},expression:"editCourse.teacher"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"地点",prop:"location"}},[s("el-input",{model:{value:e.editCourse.location,callback:function(t){e.editCourse.location=t},expression:"editCourse.location"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"星期",prop:"week_day"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.editCourse.week_day,callback:function(t){e.editCourse.week_day=t},expression:"editCourse.week_day"}},[s("el-option",{key:1,attrs:{label:"星期一",value:1}}),e._v(" "),s("el-option",{key:2,attrs:{label:"星期二",value:2}}),e._v(" "),s("el-option",{key:3,attrs:{label:"星期三",value:3}}),e._v(" "),s("el-option",{key:4,attrs:{label:"星期四",value:4}}),e._v(" "),s("el-option",{key:5,attrs:{label:"星期五",value:5}}),e._v(" "),s("el-option",{key:6,attrs:{label:"星期六",value:6}}),e._v(" "),s("el-option",{key:7,attrs:{label:"星期日",value:7}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"节数"}},[s("el-col",{attrs:{span:11}},[s("el-form-item",{attrs:{prop:"start_section"}},[s("el-select",{attrs:{placeholder:"开始"},on:{change:function(t){e.startSectionChange(1)}},model:{value:e.editCourse.start_section,callback:function(t){e.editCourse.start_section=t},expression:"editCourse.start_section"}},[s("el-option",{key:1,attrs:{label:"第1节",value:1}}),e._v(" "),s("el-option",{key:3,attrs:{label:"第3节",value:3}}),e._v(" "),s("el-option",{key:6,attrs:{label:"第6节",value:6}}),e._v(" "),s("el-option",{key:8,attrs:{label:"第8节",value:8}}),e._v(" "),s("el-option",{key:10,attrs:{label:"第10节",value:10}})],1)],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("—")]),e._v(" "),s("el-col",{attrs:{span:11}},[s("el-form-item",{attrs:{prop:"end_section"}},[s("el-select",{attrs:{placeholder:"结束"},model:{value:e.editCourse.end_section,callback:function(t){e.editCourse.end_section=t},expression:"editCourse.end_section"}},e._l(e.end_sections,function(t){return t>=e.editCourse.start_section?s("el-option",{key:t,attrs:{label:"第"+t+"节",value:t}}):e._e()}))],1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"周数"}},[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{prop:"start_week"}},[s("el-select",{attrs:{placeholder:"开始"},on:{change:function(t){e.startWeekChange(1)}},model:{value:e.editCourse.start_week,callback:function(t){e.editCourse.start_week=t},expression:"editCourse.start_week"}},e._l(20,function(e){return s("el-option",{key:e,attrs:{label:"第"+e+"周",value:e}})}))],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("—")]),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{prop:"end_week"}},[s("el-select",{attrs:{placeholder:"结束"},model:{value:e.editCourse.end_week,callback:function(t){e.editCourse.end_week=t},expression:"editCourse.end_week"}},e._l(e.end_weeks,function(t){return t>=e.editCourse.start_week?s("el-option",{key:t,attrs:{label:"第"+t+"周",value:t}}):e._e()}))],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"right","padding-right":"3px"},attrs:{span:4}},[e._v("类型:")]),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{prop:"status"}},[s("el-select",{attrs:{placeholder:"类型"},model:{value:e.editCourse.status,callback:function(t){e.editCourse.status=t},expression:"editCourse.status"}},[s("el-option",{key:"0",attrs:{label:"全部",value:0}}),e._v(" "),s("el-option",{key:"1",attrs:{label:"单周",value:1}}),e._v(" "),s("el-option",{key:"2",attrs:{label:"双周",value:2}})],1)],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",slot:"footer"},[s("el-button",{on:{click:function(t){e.editCourseVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editSubmit("editCourse")}}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]}}});
webpackJsonp([7],{157:function(e,t,o){function i(e){o(178)}var a=o(9)(o(180),o(181),i,"data-v-0cae88aa",null);e.exports=a.exports},178:function(e,t,o){var i=o(179);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(17)("3555bf54",i,!0)},179:function(e,t,o){t=e.exports=o(7)(),t.push([e.i,".nameWidth[data-v-0cae88aa]{width:22%}",""])},180:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{infoData:{groups:[],positions:[]},form:{id:"",name:"",sex:"0",grouping:"",email:"",tel:"",position:[]},rules:{id:[{required:!0,message:"请输入学号"},{validator:function(e,t,o){if(!/^\d{10,11}$/.test(t))return o(new Error("请输入正确的学号"));o()},message:"请输入正确的学号"}],name:[{required:!0,message:"请输入姓名"},{min:2,max:4,message:"请输入正确的姓名"}],sex:[{required:!0,message:"请输选择性别"}],grouping:[{required:!0,message:"请选择分组"}],position:[{type:"array",required:!0,message:"请选择职务"}],tel:[{required:!0,message:"请输入手机号"},{validator:function(e,t,o){if(!/^1[34578]\d{9}$/.test(t))return o(new Error("请输入正确的手机号"));o()},message:"请输入正确的手机号"}],email:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入正确的邮箱"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return!1;t.$loading();var i=t.form;axios.post("/admin/user/add",{id:i.id,name:i.name,sex:i.sex,grouping_id:i.grouping,positions:i.position,tel:i.tel,email:i.email}).then(function(o){t.$loading().close();var i=o.data;1===parseInt(i.code)?t.$confirm("人员添加成功，是否继续添加？","提示",{confirmButtonText:"继续",cancelButtonText:"返回",type:"info"}).then(function(){t.$refs[e].resetFields()}).catch(function(){t.$router.push("/user/list")}):t.$message({message:i.msg,type:"warning"})}).catch(function(e){})})},info:function(){var e=this;axios.get("/admin/user/add/info",{}).then(function(t){var o=t.data;e.infoData.groups=o.groups,e.infoData.positions=o.positions}).catch(function(e){})}},mounted:function(){this.info()}}},181:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"学号",prop:"id"}},[o("el-input",{staticClass:"nameWidth",model:{value:e.form.id,callback:function(t){e.form.id=e._n(t)},expression:"form.id"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"姓名",prop:"name"}},[o("el-input",{staticClass:"nameWidth",model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sex"}},[o("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.form.sex=t},expression:"form.sex"}},[o("el-radio",{attrs:{label:"0"}},[e._v("男")]),e._v(" "),o("el-radio",{attrs:{label:"1"}},[e._v("女")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"分组",prop:"grouping"}},[o("el-select",{attrs:{placeholder:"请选择分组"},model:{value:e.form.grouping,callback:function(t){e.form.grouping=t},expression:"form.grouping"}},e._l(e.infoData.groups,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"职务",prop:"position"}},[o("el-checkbox-group",{model:{value:e.form.position,callback:function(t){e.form.position=t},expression:"form.position"}},e._l(e.infoData.positions,function(t){return o("el-checkbox",{key:t.id,attrs:{label:t.id,value:t.id,name:"type"}},[e._v(e._s(t.name))])}))],1),e._v(" "),o("el-form-item",{attrs:{label:"电话",prop:"tel"}},[o("el-input",{staticClass:"nameWidth",model:{value:e.form.tel,callback:function(t){e.form.tel=t},expression:"form.tel"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[o("el-input",{staticClass:"nameWidth",model:{value:e.form.email,callback:function(t){e.form.email=t},expression:"form.email"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("立即添加")]),e._v(" "),o("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});
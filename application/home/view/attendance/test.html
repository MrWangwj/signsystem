{extend name="public/base"}
{block name="link"}
<link rel="stylesheet" type="text/css" href="{$Think.config.parse_str.__CSS__}attendance.css">
<!--<script  src="{$Think.config.parse_str.__JS__}Chart.js"></script>-->
<script  src="{$Think.config.parse_str.__JS__}Chart-1.0.1-beta.4.js"></script>
{/block}
{block name="main"}
<table class="table table-striped" id="table">
    <tr>
        <th>排名</th>
        <th>组别</th>
        <th>成员</th>
        <th>学号</th>
        <th>在线时长(分钟)</th>
    </tr>
</table>
{/block}
{block name="js"}
<script>
    $(function () {
        $.post("{:url('home/attendance/getThisTime')}",function (data) {
            var table = $("#table");
            for(var i =0;i<data.length;i++) {
                table.append(
                        "<tr> " +
                        "<td>" + (i+1) +"</td> " +
                        "<td>" + data[i]['group_name'] + "</td> " +
                        "<td>" + data[i]['name'] + "</td>" +
                        "<td>" + data[i]['user_id'] + "</td>" +
                        "<td>" + Math.round(data[i]['times']/60) + "</td>" +
                        "</tr>")
            }

            $.post("{:url('home/attendance/getNo')}",function (data) {
                var table = $("#table");
                if(data.length==0) return;
                for(var j =0;j<data.count;j++) {
                    table.append(
                            "<tr> " +
                            "<td>" + "--" +"</td> " +
                            "<td>" + data.list[j]['group_name'] + "</td> " +
                            "<td>" + data.list[j]['name'] + "</td>" +
                            "<td>" + data.list[j]['user_id'] + "</td>" +
                            "<td>" + data.list[j]['time'] + "</td>" +
                            "</tr>")
                }
            })
        })

    })

</script>
{/block}